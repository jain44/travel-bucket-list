<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DreamTrip Portal</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap');
*{box-sizing:border-box;scroll-behavior:smooth;}
.team-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
  text-align: center;
  margin-top: 1rem;
}

.team-member {
  background: rgba(255, 255, 255, 0.05);
  padding: 1rem;
  border-radius: 10px;
  backdrop-filter: blur(4px);
  transition: transform 0.3s ease, background 0.3s ease;
}

.team-member:hover {
  transform: translateY(-5px);
  background: rgba(255, 255, 255, 0.1);
}

#stars {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  background: transparent;
}
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:var(--bg-color);
  color:var(--text-color);
  overflow-x:hidden;
  transition:background 0.5s,color 0.5s;
}

/* THEME VARIABLES */
:root {
  --bg-color:#050810;
  --text-color:#ffffff;
  --card-bg:rgba(255,255,255,0.08);
  --accent:#00ffff;
  --header-bg:rgba(255,255,255,0.05);
  --input-bg:rgba(255,255,255,0.1);
  --visited-color:#38ef7d;
  --wishlist-color:#00f0f0;
  --planned-color:#ffd166;
}
body.light {
  --bg-color:#f7f7f7;
  --text-color:#111;
  --card-bg:#ffffff;
  --accent:#007bff;
  --header-bg:rgba(255,255,255,0.8);
  --input-bg:#f0f0f0;
  --visited-color:#2ecc71;
  --wishlist-color:#007bff;
  --planned-color:#e6b800;
}

/* HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:1rem 2rem;
  background:var(--header-bg);
  backdrop-filter:blur(10px);
  position:sticky;
  top:0;
  z-index:100;
  transition:background 0.5s;
}
h1{color:var(--accent);letter-spacing:2px;}
nav a{
  margin:0 1rem;
  text-decoration:none;
  color:var(--text-color);
  font-weight:600;
  transition:.3s;
  padding:.4rem .8rem;
  border-radius:10px;
}
nav a.active, nav a:hover{
  background:var(--accent);
  color:#000;
  text-shadow:none;
}

/* THEME ICON */
#themeToggle{
  cursor:pointer;
  font-size:1.6rem;
  transition:transform 0.3s;
}
#themeToggle:hover{transform:scale(1.2);}

/* SECTIONS */
.section{display:none;text-align:center;padding:3rem 2rem;min-height:90vh;}
.section.active{display:block;animation:fadeIn .8s ease;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}

/* HOME CAROUSEL */
.carousel{position:relative;width:100%;height:85vh;overflow:hidden;}
.carousel img{
  width:100%;height:85vh;object-fit:cover;
  position:absolute;top:0;left:0;
  opacity:0;transition:opacity 1.5s ease;
}
.carousel img.active{opacity:1;}
.carousel .caption{
  position:absolute;bottom:60px;left:50%;transform:translateX(-50%);
  background:rgba(0,0,0,0.5);
  padding:1rem 2rem;border-radius:30px;
  font-size:1.5rem;font-weight:600;color:var(--accent);
}
.carousel img {
  transition: transform 0.5s ease, opacity 1.5s ease;
  will-change: transform;
}


/* BUTTONS */
button{
  background:var(--accent);color:#000;border:none;
  padding:.7rem 1.5rem;border-radius:25px;font-weight:bold;
  cursor:pointer;transition:.3s;
}
button:hover{background:var(--accent);transform:scale(1.05);opacity:.9;}

/* INPUTS */
input,select,textarea{
  width:100%;padding:.7rem;border-radius:10px;border:none;outline:none;
  background:var(--input-bg);color:var(--text-color);font-size:1rem;margin:.4rem 0;
}
textarea{resize:none;}

/* CARDS */
.cards{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;padding:2rem;
}
.card{
  background:var(--card-bg);border-radius:20px;padding:1.2rem;
  transition:.3s;box-shadow:0 0 10px rgba(0,255,255,0.2);
  color:var(--text-color);
}
.card.visited{border:2px solid var(--accent);opacity:.95;}
.card:hover{transform:scale(1.05);}

/* MAP */
#map{
  height:80vh;width:90%;max-width:1100px;margin:2rem auto;border-radius:20px;
  box-shadow:0 0 20px var(--accent);
  position:relative;
}

/* LEGEND */
.map-legend {
  position: absolute;
  left: 16px;
  bottom: 16px;
  z-index: 1000;
  background: rgba(0,0,0,0.45);
  color: #fff;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 13px;
  display:flex;
  gap:10px;
  align-items:center;
}
.legend-item{display:flex;gap:8px;align-items:center}
.legend-swatch{width:12px;height:12px;border-radius:3px;display:inline-block;box-shadow:0 0 6px rgba(0,0,0,0.4)}

/* ABOUT */
.about-box{
  background:var(--card-bg);
  padding:2rem;border-radius:20px;
  max-width:800px;margin:auto;
  box-shadow:0 0 20px rgba(0,255,255,0.1);
  color:var(--text-color);
}

/* FOOTER */
footer{text-align:center;padding:1rem;font-size:.9rem;color:#aaa;background:var(--header-bg);}

/* MODAL */
.modal{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);backdrop-filter:blur(8px);
  justify-content:center;align-items:center;z-index:1000;
}
.modal-content{
  background:var(--card-bg);
  padding:2rem;border-radius:20px;
  width:90%;max-width:420px;text-align:left;
  box-shadow:0 0 20px rgba(0,255,255,0.2);
  color:var(--text-color);
}
.modal h3{color:var(--accent);text-align:center;margin-top:0;}
.close{
  position:absolute;right:20px;top:15px;font-size:1.5rem;cursor:pointer;color:var(--accent);
}

/* RESPONSIVE */
@media(max-width:600px){
  nav a{margin:0 .3rem;font-size:.9rem;}
  .carousel .caption{font-size:1rem;bottom:40px;padding:.5rem 1rem;}
  .map-legend{left:8px;bottom:8px;font-size:12px}
}
</style>
</head>
<body>
<canvas id="stars"></canvas>
  <header>
  <h1>üöÄ DreamTrip Portal</h1>
  <nav>
    <a href="#" class="nav-link active" data-section="home">Home</a>
    <a href="#" class="nav-link" data-section="list">Bucket List</a>
    <a href="#" class="nav-link" data-section="mapSection">Map</a>
    <a href="#" class="nav-link" data-section="about">About</a>
  </nav>
  <div id="themeToggle" title="Toggle theme">üåô</div>
</header>

<!-- HOME -->
<section id="home" class="section active">
  <div class="carousel">
    <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e" class="active" alt="Beach">
    <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470" alt="Mountains">
    <img src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1" alt="City">
    <img src="https://images.unsplash.com/photo-1483683804023-6ccdb62f86ef" alt="Desert">
    <div class="caption">‚ÄúThe world is yours to explore.‚Äù </div>
  </div>
  <h2 style="margin-top:2rem;">Ready for takeoff?</h2>
  <p>Start building your ultimate bucket list of dream destinations.</p>
  <button id="startBtn">üß≠ Begin My Journey</button>
</section>

<!-- BUCKET LIST -->
<section id="list" class="section">
  <h2>My Travel Bucket List </h2>
  <p style="color:#aaa;">Add the places that call your soul ‚Äî from beaches to spaceports!</p>
  <button id="openModalBtn">‚ûï Add New Destination</button>
  <div class="cards" id="destinationCards"></div>
</section>

<!-- MODAL FORM -->
<div class="modal" id="addModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <h3>Add New Destination</h3>

    <label>Destination Name</label>
    <input type="text" id="destName" placeholder="e.g. Murudeshwar">

    <label>Country</label>
    <input type="text" id="destCountry" placeholder="e.g. India">

    <label>Category</label>
    <select id="destCategory">
      <option>Beach</option><option>City</option>
      <option>Mountains</option><option>Desert</option>
      <option>Historical</option><option>Other</option>
    </select>

    <label>Status</label>
    <select id="destStatus">
      <option value="wishlist">Wishlist</option>
      <option value="planned">Planned</option>
      <option value="visited">Visited</option>
    </select>

    <label>Notes (Optional)</label>
    <textarea id="destNotes" rows="3" placeholder="Why do you want to visit this place?"></textarea>

    <button id="addDestinationBtn" style="width:100%;margin-top:10px;">Add Destination</button>
  </div>
</div>

<!-- MAP -->
<section id="mapSection" class="section">
  <h2>Explore the Interactive World Map üó∫Ô∏è</h2>
  <p>‚ú® Click anywhere to mark it as *visited*! Your adventures glow in cyan.</p>
  <div id="map"></div>
  <!-- Legend -->
  <div class="map-legend" id="mapLegend" style="display:none">
    <div class="legend-item"><span class="legend-swatch" id="sw-wishlist" style="background:var(--wishlist-color)"></span>Wishlist</div>
    <div class="legend-item"><span class="legend-swatch" id="sw-planned" style="background:var(--planned-color)"></span>Planned</div>
    <div class="legend-item"><span class="legend-swatch" id="sw-visited" style="background:var(--visited-color)"></span>Visited</div>
  </div>
</section>

<!-- ABOUT -->
<!-- ABOUT -->
<section id="about" class="section">
  <h2>About This Project üí°</h2>
  <div class="about-box">
    <p>
      <b>DreamTrip Portal</b> is a futuristic travel planner built for dreamers and explorers. 
      Create your personal map of memories ‚Äî from the highest peaks to cosmic journeys beyond Earth. 
      <br><br>
      Crafted with ‚ù§Ô∏è using <b>HTML</b>, <b>CSS</b>, <b>JavaScript</b>, and <b>Leaflet Maps</b>.
      <br><br>
      ‚ÄúJobs fill your pocket, but adventures fill your soul.‚Äù üå†
    </p>

    <hr style="border: none; height: 1px; background: var(--accent); margin: 2rem 0;">

    <h3 style="color: var(--accent); text-align:center;"> Our Team</h3>

    <div class="team-grid">
      <div class="team-member"><b>Parth Jadhav</b><br>Roll No. 41</div>
      <div class="team-member"> <b>Viraj Jadhav</b><br>Roll No. 42</div>
      <div class="team-member"><b>Prakshal Jain</b><br>Roll No. 43</div>
      <div class="team-member"><b>Jainam Jain</b><br>Roll No. 44</div>
      <div class="team-member"><b>Aryan Jaiswal</b><br>Roll No. 45</div>
    </div>
  </div>
</section>


<footer>
  <p>‚ú® Crafted for IP Project 2025 | Group 9 ‚ú®</p>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
document.addEventListener("DOMContentLoaded",()=>{
  // üå† Animated Star Background
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
let stars = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

function createStars() {
  stars = [];
  const count = window.innerWidth < 600 ? 50 : 100;
  for (let i = 0; i < count; i++) {
    stars.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 1.5,
      alpha: Math.random(),
      speed: Math.random() * 0.02 + 0.01
    });
  }
}
createStars();

function animateStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (let s of stars) {
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
    ctx.fill();
    s.alpha += s.speed;
    if (s.alpha <= 0 || s.alpha >= 1) s.speed *= -1;
  }
  requestAnimationFrame(animateStars);
}
animateStars();

  const links=document.querySelectorAll('.nav-link');
  const sections=document.querySelectorAll('.section');
  const startBtn=document.getElementById('startBtn');
  const cards=document.getElementById('destinationCards');
  const modal=document.getElementById('addModal');
  const openModalBtn=document.getElementById('openModalBtn');
  const closeModal=document.getElementById('closeModal');
  const addDestinationBtn=document.getElementById('addDestinationBtn');
  const themeToggle=document.getElementById('themeToggle');
  const mapLegend=document.getElementById('mapLegend');

  // load destinations (backwards compatible)
  let destinations=JSON.parse(localStorage.getItem('destinations'))||[];

  // ensure status exists for older entries
  destinations = destinations.map(d=>{
    if(!d.status){
      d.status = (d.visited ? 'visited' : 'wishlist');
    }
    return d;
  });

  // Section navigation
  function showSection(id){
    links.forEach(l=>l.classList.remove('active'));
    document.querySelector(`[data-section="${id}"]`).classList.add('active');
    sections.forEach(sec=>sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(id==="mapSection"){setTimeout(()=>map.invalidateSize(),300);}
  }
  links.forEach(link=>link.addEventListener('click',e=>{
    e.preventDefault();showSection(link.dataset.section);
  }));
  if(startBtn)startBtn.addEventListener('click',()=>showSection('list'));

  // Modal controls
  openModalBtn.addEventListener('click',()=>modal.style.display='flex');
  closeModal.addEventListener('click',()=>modal.style.display='none');
  window.onclick=e=>{if(e.target===modal)modal.style.display='none';}

  // Save & render
  function save(){localStorage.setItem('destinations',JSON.stringify(destinations));}

  function render(){
    cards.innerHTML='';
    if(destinations.length===0){
      cards.innerHTML='<p>üß≥ No destinations yet... your passport awaits adventure!</p>';return;
    }
    destinations.forEach((dest,i)=>{
      const div=document.createElement('div');
      div.className='card';if(dest.status==='visited')div.classList.add('visited');
      div.innerHTML=`
        <h3>${escapeHtml(dest.name)}</h3>
        <p>üåç ${escapeHtml(dest.country||'')}</p>
        <p>üè∑Ô∏è ${escapeHtml(dest.category||'')}</p>
        ${dest.notes?`<p>üí¨ ${escapeHtml(dest.notes)}</p>`:''}
        <p>Status: ${escapeHtml(dest.status)}</p>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button onclick="toggleVisited(${i})">${dest.status==='visited'?'Unmark':'Mark Visited'}</button>
          <button onclick="deleteDest(${i})">Delete</button>
        </div>
      `;
      cards.appendChild(div);
    });
    loadMarkers();
    drawRoute();
    // show legend if there are markers
    mapLegend.style.display = destinations.some(d=>d.coords) ? 'flex' : 'none';
  }

  // expose safe helpers
  window.toggleVisited = i => {
    // toggle between visited and wishlist (if planned -> visited)
    const d = destinations[i];
    if(!d) return;
    if(d.status === 'visited'){ d.status = 'wishlist'; d.visited = false; }
    else { d.status = 'visited'; d.visited = true; }
    save(); render();
  };
  window.deleteDest = i => { destinations.splice(i,1); save(); render(); }

  /* === MAP === */
  const map = L.map('map').setView([20,0],3);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:12,minZoom:2}).addTo(map);

  let markers=[];         // circle markers
  let routeLayer = null;  // polyline for visited route

  function getColorForStatus(status){
    if(status === 'visited') return getComputedStyle(document.documentElement).getPropertyValue('--visited-color') || '#38ef7d';
    if(status === 'planned') return getComputedStyle(document.documentElement).getPropertyValue('--planned-color') || '#ffd166';
    return getComputedStyle(document.documentElement).getPropertyValue('--wishlist-color') || '#00f0f0';
  }

  function loadMarkers(){
    markers.forEach(m=>map.removeLayer(m)); markers=[];
    destinations.filter(d=>d.coords).forEach(d=>{
      const color = getColorForStatus(d.status);
      const m = L.circleMarker(d.coords, { color: color.trim(), radius:7, fillOpacity:0.95 }).addTo(map)
        .bindPopup(`<b>${escapeHtml(d.name)}</b><br>${escapeHtml(d.country||'')}<br>Status: ${escapeHtml(d.status)}<br>
                    <small>${d.visited? 'Visited ‚úÖ' : 'Wishlist'}</small>`);
      markers.push(m);
    });
  }

  function drawRoute(){
    if(routeLayer){ try{ map.removeLayer(routeLayer); }catch(e){} routeLayer = null; }
    // collect visited places with coords, ordered by created timestamp if present
    const visited = destinations
      .filter(p => p.coords && p.status === 'visited')
      .sort((a,b) => (a.created||0) - (b.created||0))
      .map(p => p.coords);
    if(visited.length < 2) return;
    routeLayer = L.polyline(visited, { color: getComputedStyle(document.documentElement).getPropertyValue('--visited-color') || '#38ef7d', weight: 3, opacity:0.9 }).addTo(map);
    // fit map to route with padding
    try{ map.fitBounds(routeLayer.getBounds(), { padding:[40,40] }); }catch(e){}
  }

  // Add via map click
  map.on('click',e=>{
    const name=prompt("üåü Name this place you've discovered:");
    if(!name) return;
    const newPlace = {
      name,
      visited:true,
      status:'visited',
      coords:[e.latlng.lat, e.latlng.lng],
      country:"Unknown",
      category:"Other",
      notes:"",
      created: Date.now()
    };
    destinations.push(newPlace); save(); render();
  });

  // Add via modal (now includes status)
  addDestinationBtn.addEventListener('click',()=>{
    const name=document.getElementById('destName').value.trim();
    const country=document.getElementById('destCountry').value.trim();
    const category=document.getElementById('destCategory').value;
    const status=document.getElementById('destStatus').value;
    const notes=document.getElementById('destNotes').value.trim();
    if(!name){alert("Please enter destination name!");return;}
    modal.style.display='none';
    // geocode
    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(name+" "+country)}`)
    .then(res=>res.json())
    .then(data=>{
      let coords=null; if(data.length>0) coords=[parseFloat(data[0].lat), parseFloat(data[0].lon)];
      const item = { name, country, category, notes, status, visited: (status==='visited'), coords, created: Date.now() };
      destinations.push(item); save(); render();
    })
    .catch(()=>{
      // on error still add without coords
      const item = { name, country, category, notes, status, visited: (status==='visited'), coords:null, created: Date.now() };
      destinations.push(item); save(); render();
    });
  });

  // Utility: sanitize text for innerHTML usage in our templates
  function escapeHtml(str){
    if(!str) return '';
    return String(str)
      .replace(/&/g,'&amp;')
      .replace(/</g,'&lt;')
      .replace(/>/g,'&gt;')
      .replace(/"/g,'&quot;')
      .replace(/'/g,'&#39;');
  }

  // initial render + route
  render();

  // Carousel
  const imgs=document.querySelectorAll('.carousel img');
  const caption=document.querySelector('.carousel .caption');
  const captions=[
    "‚ÄúThe world is yours to explore.‚Äù üåè",
    "‚ÄúClimb mountains not so the world can see you, but so you can see the world.‚Äù ‚õ∞Ô∏è",
    "‚ÄúWander often, wonder always.‚Äù üåÉ",
    "‚ÄúAdventure awaits beyond the horizon.‚Äù üèúÔ∏è"
  ];
  let cur=0;
  setInterval(()=>{
    imgs[cur].classList.remove('active');
    cur=(cur+1)%imgs.length;
    imgs[cur].classList.add('active');
    caption.textContent=captions[cur];
  },4000);

  // Theme toggle
  const userTheme=localStorage.getItem('theme');
  if(userTheme==='light'){
    document.body.classList.add('light');
    themeToggle.textContent='‚òÄÔ∏è';
  }
  themeToggle.addEventListener('click',()=>{
    document.body.classList.toggle('light');
    const isLight=document.body.classList.contains('light');
    themeToggle.textContent=isLight?'‚òÄÔ∏è':'üåô';
    localStorage.setItem('theme',isLight?'light':'dark');
  });

// üé¢ Parallax Effect for Home Page
const home = document.getElementById("home");
const carouselImgs = document.querySelectorAll(".carousel img");

function parallaxMove(x, y) {
  const moveX = (x / window.innerWidth - 0.5) * 20;
  const moveY = (y / window.innerHeight - 0.5) * 20;
  carouselImgs.forEach((img, i) => {
    const depth = (i + 1) * 2;
    img.style.transform = `translate(${moveX / depth}px, ${moveY / depth}px) scale(1.05)`;
  });
}

// Mouse control
home.addEventListener("mousemove", e => {
  parallaxMove(e.clientX, e.clientY);
});

// Mobile gyroscope support
window.addEventListener("deviceorientation", e => {
  if (e.beta && e.gamma) {
    const x = e.gamma * 10 + window.innerWidth / 2;
    const y = e.beta * 10 + window.innerHeight / 2;
    parallaxMove(x, y);
  }
});

});
</script>
</body>
</html>